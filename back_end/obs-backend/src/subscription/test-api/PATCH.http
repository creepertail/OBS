#  /**
#    * API 功能：
#    * PATCH url/subscriptions/:userID/:merchantID + body => 更新通知設定 (需要 JWT 認證)
#    *   - body: { notificationEnabled }
#    *   - notificationEnabled: true 或 false
#    *
#    * 權限說明：
#    *   - User: 只能更新自己的訂閱
#    *   - Admin: 可以更新任何人的訂閱
#    */

# ----------
# 請先執行 POST.http 建立訂閱
# 並確保 token 是有效的
# ----------

@user1_token = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI5ZjhjODcxMS04MGI1LTQ0OTUtOGU1ZS03NzU0YzAxOTgwYjUiLCJhY2NvdW50IjoidXNlci10ZXN0LTEiLCJ0eXBlIjoidXNlciIsImlhdCI6MTc2MzgxOTIwOSwiZXhwIjoxNzYzOTA1NjA5fQ._RTbrhb4j3EBrqwIu-oZ9bPKNimdcPuWJGqIOYx0A0M
@user2_token = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2MWQ3MWEzYy00NmJkLTRkMzQtYjZkNy1mZWY2YWY5NmM3YzciLCJhY2NvdW50IjoidXNlci10ZXN0LTIiLCJ0eXBlIjoidXNlciIsImlhdCI6MTc2MzgxOTIyNSwiZXhwIjoxNzYzOTA1NjI1fQ.7sD_J0pXOzEuxUm9z5sdbygl2QU-whKOAlWLWBZfdOs
@user1_id = 9f8c8711-80b5-4495-8e5e-7754c01980b5
@user2_id = 61d71a3c-46bd-4d34-b6d7-fef6af96c7c7
@merchant1_id = f6aa94f4-433c-4008-a8d4-679f86532ea6
@merchant2_id = 81afb742-89e2-43d2-8bb2-f88c2bba4a94


### User 關閉通知 => 成功
PATCH http://localhost:3000/subscriptions/{{user1_id}}/{{merchant1_id}}
Content-Type: application/json
Authorization: Bearer {{user1_token}}

{
  "notificationEnabled": false
}

### User 開啟通知 => 成功
PATCH http://localhost:3000/subscriptions/{{user1_id}}/{{merchant1_id}}
Content-Type: application/json
Authorization: Bearer {{user1_token}}

{
  "notificationEnabled": true
}

### User 更新別人的訂閱 => 失敗 403 Forbidden "You can only update your own subscription"
PATCH http://localhost:3000/subscriptions/{{user2_id}}/{{merchant1_id}}
Content-Type: application/json
Authorization: Bearer {{user1_token}}

{
  "notificationEnabled": false
}

# ### Admin 更新任何人的訂閱 => 成功
# PATCH http://localhost:3000/subscriptions/{{user2_id}}/{{merchant1_id}}
# Content-Type: application/json
# Authorization: Bearer {{admin_token}}

# {
#   "notificationEnabled": true
# }

### 未帶 token 更新訂閱 => 失敗 401 Unauthorized
PATCH http://localhost:3000/subscriptions/{{user1_id}}/{{merchant1_id}}
Content-Type: application/json

{
  "notificationEnabled": false
}

