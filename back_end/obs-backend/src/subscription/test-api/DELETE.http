#  /**
#    * API 功能：
#    * DELETE url/subscriptions/:userID/:merchantID => 刪除訂閱 (需要 JWT 認證)
#    *
#    * 權限說明：
#    *   - User: 只能刪除自己的訂閱
#    *   - Admin: 可以刪除任何人的訂閱
#    */

# ----------
# 請先執行 POST.http 建立訂閱
# 並確保 token 是有效的
# ----------

@user1_token = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI5ZjhjODcxMS04MGI1LTQ0OTUtOGU1ZS03NzU0YzAxOTgwYjUiLCJhY2NvdW50IjoidXNlci10ZXN0LTEiLCJ0eXBlIjoidXNlciIsImlhdCI6MTc2MzgxOTIwOSwiZXhwIjoxNzYzOTA1NjA5fQ._RTbrhb4j3EBrqwIu-oZ9bPKNimdcPuWJGqIOYx0A0M
@user2_token = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2MWQ3MWEzYy00NmJkLTRkMzQtYjZkNy1mZWY2YWY5NmM3YzciLCJhY2NvdW50IjoidXNlci10ZXN0LTIiLCJ0eXBlIjoidXNlciIsImlhdCI6MTc2MzgxOTIyNSwiZXhwIjoxNzYzOTA1NjI1fQ.7sD_J0pXOzEuxUm9z5sdbygl2QU-whKOAlWLWBZfdOs
@user1_id = 9f8c8711-80b5-4495-8e5e-7754c01980b5
@user2_id = 61d71a3c-46bd-4d34-b6d7-fef6af96c7c7
@merchant1_id = f6aa94f4-433c-4008-a8d4-679f86532ea6
@merchant2_id = 81afb742-89e2-43d2-8bb2-f88c2bba4a94


### User 刪除別人的訂閱 => 失敗 403 Forbidden "You can only remove your own subscription"
DELETE http://localhost:3000/subscriptions/{{user2_id}}/{{merchant1_id}}
Authorization: Bearer {{user1_token}}

### 未帶 token 刪除訂閱 => 失敗 401 Unauthorized
DELETE http://localhost:3000/subscriptions/{{user1_id}}/{{merchant1_id}}

# ### Admin 刪除任何人的訂閱 => 成功
# DELETE http://localhost:3000/subscriptions/{{user_id}}/{{merchant1_id}}
# Authorization: Bearer {{admin_token}}

### User 刪除自己的訂閱 => 成功 (請先重新建立訂閱)
DELETE http://localhost:3000/subscriptions/{{user1_id}}/{{merchant1_id}}
Authorization: Bearer {{user1_token}}

### 刪除不存在的訂閱 => 失敗 404 Not Found
DELETE http://localhost:3000/subscriptions/00000000-0000-0000-0000-000000000000/00000000-0000-0000-0000-000000000001
Authorization: Bearer {{user1_token}}

