# ç·šä¸Šæ›¸åŸå¾Œç«¯é–‹ç™¼é€²åº¦è¿½è¹¤

## ğŸ“š ä»€éº¼æ˜¯ CRUDï¼Ÿ

**CRUD** æ˜¯å››å€‹åŸºæœ¬è³‡æ–™åº«æ“ä½œçš„ç¸®å¯«ï¼š

| æ“ä½œ | è‹±æ–‡å…¨å | èªªæ˜ | HTTP æ–¹æ³• | ç¯„ä¾‹ API |
|------|---------|------|-----------|---------|
| **C** | **Create** | æ–°å¢è³‡æ–™ | POST | `POST /users` |
| **R** | **Read** | è®€å–è³‡æ–™ | GET | `GET /users` æˆ– `GET /users/:id` |
| **U** | **Update** | æ›´æ–°è³‡æ–™ | PATCH/PUT | `PATCH /users/:id` |
| **D** | **Delete** | åˆªé™¤è³‡æ–™ | DELETE | `DELETE /users/:id` |

### å¯¦éš›ç¯„ä¾‹ï¼ˆä»¥æ›¸ç±ç‚ºä¾‹ï¼‰ï¼š

```typescript
// CREATE - æ–°å¢ä¸€æœ¬æ›¸
POST /books
{
  "title": "TypeScript å…¥é–€",
  "price": 450
}

// READ - è®€å–æ‰€æœ‰æ›¸ç±
GET /books

// READ - è®€å–å–®ä¸€æ›¸ç±
GET /books/123

// UPDATE - æ›´æ–°æ›¸ç±è³‡è¨Š
PATCH /books/123
{
  "price": 400
}

// DELETE - åˆªé™¤æ›¸ç±
DELETE /books/123
```

---

## ğŸ¯ é–‹ç™¼éšæ®µè¦åŠƒ

### éšæ®µ 0ï¼šç’°å¢ƒæº–å‚™ï¼ˆå‰ç½®ä½œæ¥­ï¼‰
- [x] å®‰è£ Node.jsã€MySQLã€VS Code
- [x] å»ºç«‹ NestJS å°ˆæ¡ˆ
- [x] å®‰è£å¿…è¦å¥—ä»¶
- [x] è¨­å®š `.env` ç’°å¢ƒè®Šæ•¸
- [x] è¨­å®š TypeORM é€£æ¥
- [x] å»ºç«‹ MySQL è³‡æ–™åº« `OBS`
- [x] æ¸¬è©¦å°ˆæ¡ˆå•Ÿå‹•æˆåŠŸ

**åƒè€ƒæ–‡ä»¶**ï¼š[BACKEND_SETUP_GUIDE.md](./BACKEND_SETUP_GUIDE.md) - Phase 1

---

### éšæ®µ 1ï¼šUsers æ¨¡çµ„ï¼ˆæœƒå“¡ç®¡ç†ï¼‰âœ… å·²å®Œæˆ

#### 1.1 å»ºç«‹ User Entity
- [x] å»ºç«‹ `src/users/entityies/user.entity.ts`
- [x] å®šç¾©æ¬„ä½ï¼šuser_id, email, account, password, username, phone, level, state
- [x] è¨­å®šä¸»éµç‚º UUID
- [x] å•Ÿå‹•ä¼ºæœå™¨ï¼Œç¢ºèª `users` è¡¨è‡ªå‹•å»ºç«‹

**åƒè€ƒæ–‡ä»¶**ï¼š[BACKEND_SETUP_GUIDE.md](./BACKEND_SETUP_GUIDE.md) - Phase 2

#### 1.2 å»ºç«‹ Users æ¨¡çµ„åŸºç¤æ¶æ§‹
- [x] å»ºç«‹ `src/users/dto/create-user.dto.ts` - è³‡æ–™é©—è­‰
- [x] å»ºç«‹ `src/users/users.module.ts` - æ¨¡çµ„è¨»å†Š
- [x] å»ºç«‹ `src/users/users.service.ts` - æ¥­å‹™é‚è¼¯
- [x] å»ºç«‹ `src/users/users.controller.ts` - API ç«¯é»
- [x] åœ¨ `app.module.ts` è¨»å†Š UsersModule

**å·²å¯¦ä½œåŠŸèƒ½**ï¼š
- âœ… `POST /users` - å»ºç«‹æ–°ç”¨æˆ¶ï¼ˆå¯†ç¢¼è‡ªå‹•åŠ å¯†ï¼‰
- âœ… `GET /users` - å–å¾—æ‰€æœ‰ç”¨æˆ¶
- âœ… `GET /users/:id` - å–å¾—å–®ä¸€ç”¨æˆ¶
- âœ… é‡è¤‡è³‡æ–™æª¢æŸ¥ï¼ˆemail, account, phoneï¼‰
- âœ… éŒ¯èª¤è™•ç†ï¼ˆConflictException, NotFoundExceptionï¼‰

#### 1.3 æ¸¬è©¦ Users API
- [x] å»ºç«‹ `test-api.http` æ¸¬è©¦æª”æ¡ˆ
- [x] æ¸¬è©¦æ–°å¢ç”¨æˆ¶æˆåŠŸ
- [x] æ¸¬è©¦é‡è¤‡ email å¤±æ•—
- [x] é©—è­‰è³‡æ–™å¯«å…¥è³‡æ–™åº«

**å¡ä½çš„åœ°æ–¹**ï¼š
- ç„¡

**å®Œæˆæ—¥æœŸ**ï¼š2025/11/06

---

### éšæ®µ 2ï¼šBooks æ¨¡çµ„ï¼ˆæ›¸ç±ç®¡ç†ï¼‰â¬œ é€²è¡Œä¸­

#### 2.1 å»ºç«‹ Book Entity
- [ ] å»ºç«‹ `src/books/entityies/book.entity.ts`
- [ ] å®šç¾©æ¬„ä½ï¼ˆåƒè€ƒä¸‹æ–¹æ¬„ä½æ¸…å–®ï¼‰
- [ ] å•Ÿå‹•ä¼ºæœå™¨ï¼Œç¢ºèª `books` è¡¨è‡ªå‹•å»ºç«‹
- [ ] æª¢æŸ¥è³‡æ–™è¡¨çµæ§‹

**Book Entity æ¬„ä½æ¸…å–®**ï¼š
```typescript
book_id         // ä¸»éµï¼ˆå¯ç”¨ number æˆ– uuidï¼‰
isbn            // æ›¸ç± ISBNï¼ˆå”¯ä¸€å€¼ï¼‰
title           // æ›¸å
author          // ä½œè€…
publisher       // å‡ºç‰ˆç¤¾
publication_date // å‡ºç‰ˆæ—¥æœŸ
price           // åƒ¹æ ¼
stock_quantity  // åº«å­˜æ•¸é‡
category        // åˆ†é¡
description     // æè¿°
cover_image     // å°é¢åœ–ç‰‡ URL
created_at      // å»ºç«‹æ™‚é–“
updated_at      // æ›´æ–°æ™‚é–“
```

#### 2.2 å»ºç«‹ Books DTOs
- [ ] å»ºç«‹ `src/books/dto/create-book.dto.ts`
  - å¿…å¡«ï¼štitle, price, stock_quantity
  - é¸å¡«ï¼šisbn, author, publisher, publication_date, category, description, cover_image
- [ ] å»ºç«‹ `src/books/dto/update-book.dto.ts`
  - æ‰€æœ‰æ¬„ä½éƒ½é¸å¡«ï¼ˆä½¿ç”¨ `PartialType`ï¼‰

#### 2.3 å»ºç«‹ Books æ¨¡çµ„æ¶æ§‹
- [ ] å»ºç«‹ `src/books/books.module.ts`
- [ ] å»ºç«‹ `src/books/books.service.ts`
  - [ ] `create()` - æ–°å¢æ›¸ç±
  - [ ] `findAll()` - å–å¾—æ‰€æœ‰æ›¸ç±
  - [ ] `findOne()` - å–å¾—å–®ä¸€æ›¸ç±
  - [ ] `update()` - æ›´æ–°æ›¸ç±
  - [ ] `remove()` - åˆªé™¤æ›¸ç±
  - [ ] (é€²éš) `search()` - æœå°‹æ›¸ç±ï¼ˆä¾é—œéµå­—ï¼‰
- [ ] å»ºç«‹ `src/books/books.controller.ts`
  - [ ] `POST /books` - æ–°å¢æ›¸ç±
  - [ ] `GET /books` - å–å¾—æ‰€æœ‰æ›¸ç±
  - [ ] `GET /books/:id` - å–å¾—å–®ä¸€æ›¸ç±
  - [ ] `PATCH /books/:id` - æ›´æ–°æ›¸ç±
  - [ ] `DELETE /books/:id` - åˆªé™¤æ›¸ç±
  - [ ] (é€²éš) `GET /books/search?keyword=xxx` - æœå°‹æ›¸ç±
- [ ] åœ¨ `app.module.ts` è¨»å†Š BooksModule

#### 2.4 æ¸¬è©¦ Books API
- [ ] å»ºç«‹ `test-books.http` æ¸¬è©¦æª”æ¡ˆ
- [ ] æ¸¬è©¦æ–°å¢æ›¸ç±
- [ ] æ¸¬è©¦æŸ¥è©¢æ‰€æœ‰æ›¸ç±
- [ ] æ¸¬è©¦æŸ¥è©¢å–®ä¸€æ›¸ç±
- [ ] æ¸¬è©¦æ›´æ–°æ›¸ç±
- [ ] æ¸¬è©¦åˆªé™¤æ›¸ç±
- [ ] (é€²éš) æ¸¬è©¦æœå°‹åŠŸèƒ½
- [ ] é©—è­‰è³‡æ–™å¯«å…¥è³‡æ–™åº«

**å¡ä½çš„åœ°æ–¹**ï¼š
- ï¼ˆè¨˜éŒ„ä½ é‡åˆ°çš„å•é¡Œï¼‰

**å®Œæˆæ—¥æœŸ**ï¼š

---

### éšæ®µ 3ï¼šShopping_Cart æ¨¡çµ„ï¼ˆè³¼ç‰©è»Šï¼‰â¬œ æœªé–‹å§‹

#### 3.1 å»ºç«‹ Cart Entityï¼ˆå«é—œè¯ï¼‰
- [ ] å»ºç«‹ `src/cart/entityies/cart.entity.ts`
- [ ] å®šç¾©æ¬„ä½ï¼ˆåƒè€ƒä¸‹æ–¹æ¬„ä½æ¸…å–®ï¼‰
- [ ] **è¨­å®šé—œè¯**ï¼š
  - [ ] `@ManyToOne` - Cart â†’ Userï¼ˆå¤šå€‹è³¼ç‰©è»Šé …ç›®å±¬æ–¼ä¸€å€‹ç”¨æˆ¶ï¼‰
  - [ ] `@ManyToOne` - Cart â†’ Bookï¼ˆå¤šå€‹è³¼ç‰©è»Šé …ç›®å±¬æ–¼ä¸€æœ¬æ›¸ï¼‰
- [ ] å•Ÿå‹•ä¼ºæœå™¨ï¼Œç¢ºèª `shopping_cart` è¡¨å’Œå¤–éµå»ºç«‹

**Cart Entity æ¬„ä½æ¸…å–®**ï¼š
```typescript
cart_id         // ä¸»éµ
user_id         // å¤–éµ â†’ users.user_id
book_id         // å¤–éµ â†’ books.book_id
quantity        // æ•¸é‡
added_at        // åŠ å…¥æ™‚é–“
```

#### 3.2 å»ºç«‹ Cart DTOs
- [ ] å»ºç«‹ `src/cart/dto/add-to-cart.dto.ts`
  - å¿…å¡«ï¼šbook_id, quantity
- [ ] å»ºç«‹ `src/cart/dto/update-cart.dto.ts`
  - å¿…å¡«ï¼šquantity

#### 3.3 å»ºç«‹ Cart æ¨¡çµ„æ¶æ§‹
- [ ] å»ºç«‹ `src/cart/cart.module.ts`ï¼ˆéœ€è¦ import UsersModule å’Œ BooksModuleï¼‰
- [ ] å»ºç«‹ `src/cart/cart.service.ts`
  - [ ] `addToCart()` - åŠ å…¥è³¼ç‰©è»Šï¼ˆæª¢æŸ¥åº«å­˜ï¼‰
  - [ ] `getCart()` - å–å¾—ç”¨æˆ¶çš„è³¼ç‰©è»Š
  - [ ] `updateQuantity()` - æ›´æ–°æ•¸é‡
  - [ ] `removeItem()` - ç§»é™¤é …ç›®
  - [ ] `clearCart()` - æ¸…ç©ºè³¼ç‰©è»Š
- [ ] å»ºç«‹ `src/cart/cart.controller.ts`
  - [ ] `POST /cart` - åŠ å…¥è³¼ç‰©è»Šï¼ˆéœ€ç™»å…¥ï¼‰
  - [ ] `GET /cart` - å–å¾—è³¼ç‰©è»Šå…§å®¹ï¼ˆéœ€ç™»å…¥ï¼‰
  - [ ] `PATCH /cart/:id` - æ›´æ–°æ•¸é‡ï¼ˆéœ€ç™»å…¥ï¼‰
  - [ ] `DELETE /cart/:id` - ç§»é™¤é …ç›®ï¼ˆéœ€ç™»å…¥ï¼‰
  - [ ] `DELETE /cart` - æ¸…ç©ºè³¼ç‰©è»Šï¼ˆéœ€ç™»å…¥ï¼‰
- [ ] åœ¨ `app.module.ts` è¨»å†Š CartModule

**æ³¨æ„äº‹é …**ï¼š
- è³¼ç‰©è»Š API éœ€è¦ä½¿ç”¨è€…ç™»å…¥ï¼ˆä¹‹å¾ŒæœƒåŠ  JWT èªè­‰ï¼‰
- æš«æ™‚å¯ä»¥å…ˆé€éè«‹æ±‚åƒæ•¸å‚³ `user_id` æ¸¬è©¦

#### 3.4 æ¸¬è©¦ Cart API
- [ ] å»ºç«‹ `test-cart.http` æ¸¬è©¦æª”æ¡ˆ
- [ ] æ¸¬è©¦åŠ å…¥è³¼ç‰©è»Š
- [ ] æ¸¬è©¦å–å¾—è³¼ç‰©è»Šå…§å®¹
- [ ] æ¸¬è©¦æ›´æ–°æ•¸é‡
- [ ] æ¸¬è©¦ç§»é™¤é …ç›®
- [ ] æ¸¬è©¦æ¸…ç©ºè³¼ç‰©è»Š
- [ ] é©—è­‰è³‡æ–™å¯«å…¥è³‡æ–™åº«

**å¡ä½çš„åœ°æ–¹**ï¼š
- ï¼ˆè¨˜éŒ„ä½ é‡åˆ°çš„å•é¡Œï¼‰

**å®Œæˆæ—¥æœŸ**ï¼š

---

### éšæ®µ 4ï¼šOrders æ¨¡çµ„ï¼ˆè¨‚å–®ç®¡ç†ï¼‰â¬œ æœªé–‹å§‹

#### 4.1 å»ºç«‹ Order Entityï¼ˆå«é—œè¯ï¼‰
- [ ] å»ºç«‹ `src/orders/entityies/order.entity.ts`
- [ ] å®šç¾©æ¬„ä½ï¼ˆåƒè€ƒä¸‹æ–¹æ¬„ä½æ¸…å–®ï¼‰
- [ ] **è¨­å®šé—œè¯**ï¼š
  - [ ] `@ManyToOne` - Order â†’ User
  - [ ] `@OneToMany` - Order â†’ OrderItemï¼ˆä¸€å€‹è¨‚å–®æœ‰å¤šå€‹æ˜ç´°ï¼‰
- [ ] å•Ÿå‹•ä¼ºæœå™¨ï¼Œç¢ºèª `orders` è¡¨å’Œå¤–éµå»ºç«‹

**Order Entity æ¬„ä½æ¸…å–®**ï¼š
```typescript
order_id         // ä¸»éµ
user_id          // å¤–éµ â†’ users.user_id
total_amount     // ç¸½é‡‘é¡
status           // è¨‚å–®ç‹€æ…‹ï¼špending, paid, shipped, completed, cancelled
shipping_address // é…é€åœ°å€
created_at       // å»ºç«‹æ™‚é–“
updated_at       // æ›´æ–°æ™‚é–“
```

#### 4.2 å»ºç«‹ OrderItem Entityï¼ˆå«é—œè¯ï¼‰
- [ ] å»ºç«‹ `src/orders/entityies/order-item.entity.ts`
- [ ] å®šç¾©æ¬„ä½ï¼ˆåƒè€ƒä¸‹æ–¹æ¬„ä½æ¸…å–®ï¼‰
- [ ] **è¨­å®šé—œè¯**ï¼š
  - [ ] `@ManyToOne` - OrderItem â†’ Order
  - [ ] `@ManyToOne` - OrderItem â†’ Book
- [ ] å•Ÿå‹•ä¼ºæœå™¨ï¼Œç¢ºèª `order_items` è¡¨å’Œå¤–éµå»ºç«‹

**OrderItem Entity æ¬„ä½æ¸…å–®**ï¼š
```typescript
order_item_id    // ä¸»éµ
order_id         // å¤–éµ â†’ orders.order_id
book_id          // å¤–éµ â†’ books.book_id
quantity         // æ•¸é‡
unit_price       // å–®åƒ¹ï¼ˆç•¶æ™‚çš„åƒ¹æ ¼ï¼‰
subtotal         // å°è¨ˆ
```

#### 4.3 å»ºç«‹ Orders DTOs
- [ ] å»ºç«‹ `src/orders/dto/create-order.dto.ts`
  - å¿…å¡«ï¼šshipping_address
  - èªªæ˜ï¼šè¨‚å–®æ˜ç´°å¾è³¼ç‰©è»Šå–å¾—
- [ ] å»ºç«‹ `src/orders/dto/update-order-status.dto.ts`
  - å¿…å¡«ï¼šstatus

#### 4.4 å»ºç«‹ Orders æ¨¡çµ„æ¶æ§‹
- [ ] å»ºç«‹ `src/orders/orders.module.ts`ï¼ˆéœ€è¦ import UsersModule, BooksModule, CartModuleï¼‰
- [ ] å»ºç«‹ `src/orders/orders.service.ts`
  - [ ] `createOrder()` - å»ºç«‹è¨‚å–®ï¼ˆå¾è³¼ç‰©è»Šçµå¸³ï¼‰
  - [ ] `findUserOrders()` - å–å¾—ç”¨æˆ¶çš„æ‰€æœ‰è¨‚å–®
  - [ ] `findOne()` - å–å¾—è¨‚å–®è©³æƒ…
  - [ ] `updateStatus()` - æ›´æ–°è¨‚å–®ç‹€æ…‹ï¼ˆç®¡ç†å“¡ï¼‰
  - [ ] `cancelOrder()` - å–æ¶ˆè¨‚å–®
- [ ] å»ºç«‹ `src/orders/orders.controller.ts`
  - [ ] `POST /orders` - å»ºç«‹è¨‚å–®ï¼ˆéœ€ç™»å…¥ï¼‰
  - [ ] `GET /orders` - å–å¾—ç”¨æˆ¶è¨‚å–®åˆ—è¡¨ï¼ˆéœ€ç™»å…¥ï¼‰
  - [ ] `GET /orders/:id` - å–å¾—è¨‚å–®è©³æƒ…ï¼ˆéœ€ç™»å…¥ï¼‰
  - [ ] `PATCH /orders/:id/status` - æ›´æ–°è¨‚å–®ç‹€æ…‹ï¼ˆéœ€ç®¡ç†å“¡æ¬Šé™ï¼‰
  - [ ] `DELETE /orders/:id` - å–æ¶ˆè¨‚å–®ï¼ˆéœ€ç™»å…¥ï¼‰
- [ ] åœ¨ `app.module.ts` è¨»å†Š OrdersModule

**é‡è¦é‚è¼¯**ï¼š
- å»ºç«‹è¨‚å–®æ™‚è¦æª¢æŸ¥åº«å­˜
- å»ºç«‹è¨‚å–®å¾Œè¦æ¸›å°‘æ›¸ç±åº«å­˜
- å»ºç«‹è¨‚å–®å¾Œè¦æ¸…ç©ºè³¼ç‰©è»Š
- è¨˜éŒ„ç•¶æ™‚çš„æ›¸ç±åƒ¹æ ¼ï¼ˆunit_priceï¼‰

#### 4.5 æ¸¬è©¦ Orders API
- [ ] å»ºç«‹ `test-orders.http` æ¸¬è©¦æª”æ¡ˆ
- [ ] æ¸¬è©¦å»ºç«‹è¨‚å–®ï¼ˆå¾è³¼ç‰©è»Šçµå¸³ï¼‰
- [ ] æ¸¬è©¦å–å¾—è¨‚å–®åˆ—è¡¨
- [ ] æ¸¬è©¦å–å¾—è¨‚å–®è©³æƒ…
- [ ] æ¸¬è©¦æ›´æ–°è¨‚å–®ç‹€æ…‹
- [ ] æ¸¬è©¦å–æ¶ˆè¨‚å–®
- [ ] é©—è­‰åº«å­˜æ­£ç¢ºæ‰£æ¸›
- [ ] é©—è­‰è³¼ç‰©è»Šå·²æ¸…ç©º

**å¡ä½çš„åœ°æ–¹**ï¼š
- ï¼ˆè¨˜éŒ„ä½ é‡åˆ°çš„å•é¡Œï¼‰

**å®Œæˆæ—¥æœŸ**ï¼š

---

### éšæ®µ 5ï¼šAuth æ¨¡çµ„ï¼ˆèªè­‰èˆ‡æˆæ¬Šï¼‰â¬œ æœªé–‹å§‹

#### 5.1 å®‰è£ JWT å¥—ä»¶
- [ ] ç¢ºèªå·²å®‰è£ `@nestjs/jwt`, `@nestjs/passport`, `passport-jwt`, `bcrypt`

#### 5.2 å»ºç«‹ Auth æ¨¡çµ„
- [ ] å»ºç«‹ `src/auth/auth.module.ts`
- [ ] å»ºç«‹ `src/auth/auth.service.ts`
  - [ ] `register()` - è¨»å†Šï¼ˆä½¿ç”¨ UsersServiceï¼‰
  - [ ] `login()` - ç™»å…¥ï¼ˆé©—è­‰å¯†ç¢¼ï¼Œç™¼æ”¾ JWT tokenï¼‰
  - [ ] `validateUser()` - é©—è­‰ç”¨æˆ¶
- [ ] å»ºç«‹ `src/auth/auth.controller.ts`
  - [ ] `POST /auth/register` - è¨»å†Š
  - [ ] `POST /auth/login` - ç™»å…¥

#### 5.3 å»ºç«‹ JWT Strategy å’Œ Guard
- [ ] å»ºç«‹ `src/auth/strategies/jwt.strategy.ts`
- [ ] å»ºç«‹ `src/auth/guards/jwt-auth.guard.ts`
- [ ] å»ºç«‹ `src/auth/guards/roles.guard.ts`ï¼ˆç®¡ç†å“¡æ¬Šé™æª¢æŸ¥ï¼‰
- [ ] åœ¨ `auth.module.ts` è¨­å®š JWT é…ç½®

#### 5.4 å¥—ç”¨èªè­‰åˆ°å…¶ä»–æ¨¡çµ„
- [ ] åœ¨éœ€è¦ç™»å…¥çš„ API åŠ ä¸Š `@UseGuards(JwtAuthGuard)`
  - [ ] Cart Controller çš„æ‰€æœ‰æ–¹æ³•
  - [ ] Orders Controller çš„æ‰€æœ‰æ–¹æ³•
  - [ ] Users Controller çš„ profile ç›¸é—œæ–¹æ³•
- [ ] åœ¨éœ€è¦ç®¡ç†å“¡æ¬Šé™çš„ API åŠ ä¸Š `@UseGuards(JwtAuthGuard, RolesGuard)`
  - [ ] Books Controller çš„ create, update, delete
  - [ ] Orders Controller çš„ updateStatus

#### 5.5 æ¸¬è©¦ Auth API
- [ ] å»ºç«‹ `test-auth.http` æ¸¬è©¦æª”æ¡ˆ
- [ ] æ¸¬è©¦è¨»å†ŠåŠŸèƒ½
- [ ] æ¸¬è©¦ç™»å…¥åŠŸèƒ½ï¼ˆå–å¾— JWT tokenï¼‰
- [ ] æ¸¬è©¦ä½¿ç”¨ token å­˜å–éœ€è¦èªè­‰çš„ API
- [ ] æ¸¬è©¦æ²’æœ‰ token æ™‚è¢«æ‹’çµ•
- [ ] æ¸¬è©¦ç®¡ç†å“¡æ¬Šé™

**å¡ä½çš„åœ°æ–¹**ï¼š
- ï¼ˆè¨˜éŒ„ä½ é‡åˆ°çš„å•é¡Œï¼‰

**å®Œæˆæ—¥æœŸ**ï¼š

---

### éšæ®µ 6ï¼šé€²éšåŠŸèƒ½ï¼ˆé¸åšï¼‰â¬œ æœªé–‹å§‹

#### 6.1 æ›¸ç±æœå°‹åŠŸèƒ½
- [ ] åœ¨ BooksService åŠ å…¥ `search()` æ–¹æ³•
- [ ] æ”¯æ´é—œéµå­—æœå°‹ï¼ˆæ›¸åã€ä½œè€…ã€å‡ºç‰ˆç¤¾ï¼‰
- [ ] æ”¯æ´åˆ†é¡ç¯©é¸
- [ ] æ”¯æ´åƒ¹æ ¼å€é–“ç¯©é¸

#### 6.2 åˆ†é åŠŸèƒ½
- [ ] å»ºç«‹é€šç”¨çš„åˆ†é  DTO
- [ ] åœ¨ Books, Orders ç­‰åˆ—è¡¨ API åŠ å…¥åˆ†é 
- [ ] å›å‚³ç¸½ç­†æ•¸ã€ç•¶å‰é æ•¸ç­‰è³‡è¨Š

#### 6.3 æª”æ¡ˆä¸Šå‚³ï¼ˆæ›¸ç±å°é¢ï¼‰
- [ ] å®‰è£ `@nestjs/platform-express`, `multer`
- [ ] å»ºç«‹æª”æ¡ˆä¸Šå‚³æ¨¡çµ„
- [ ] å¯¦ä½œæ›¸ç±å°é¢ä¸Šå‚³ API

#### 6.4 Swagger API æ–‡æª”
- [ ] å®‰è£ `@nestjs/swagger`
- [ ] è¨­å®š Swagger
- [ ] ç‚ºæ‰€æœ‰ API åŠ ä¸Šèªªæ˜

#### 6.5 è¨‚å–®ç‹€æ…‹è®Šæ›´é€šçŸ¥
- [ ] è¨‚å–®ç‹€æ…‹æ”¹è®Šæ™‚è¨˜éŒ„
- [ ] (é€²éš) Email é€šçŸ¥åŠŸèƒ½

---

## ğŸ“Š æ•´é«”é€²åº¦çµ±è¨ˆ

| éšæ®µ | ç‹€æ…‹ | å®Œæˆåº¦ |
|------|------|--------|
| éšæ®µ 0ï¼šç’°å¢ƒæº–å‚™ | âœ… å®Œæˆ | 100% |
| éšæ®µ 1ï¼šUsers æ¨¡çµ„ | âœ… å®Œæˆ | 100% |
| éšæ®µ 2ï¼šBooks æ¨¡çµ„ | â¬œ æœªé–‹å§‹ | 0% |
| éšæ®µ 3ï¼šShopping_Cart æ¨¡çµ„ | â¬œ æœªé–‹å§‹ | 0% |
| éšæ®µ 4ï¼šOrders æ¨¡çµ„ | â¬œ æœªé–‹å§‹ | 0% |
| éšæ®µ 5ï¼šAuth æ¨¡çµ„ | â¬œ æœªé–‹å§‹ | 0% |
| éšæ®µ 6ï¼šé€²éšåŠŸèƒ½ | â¬œ æœªé–‹å§‹ | 0% |
| **ç¸½é€²åº¦** | | **28.6%** (2/7 éšæ®µ) |

---

## ğŸ› å•é¡Œè¿½è¹¤

### å·²è§£æ±ºçš„å•é¡Œ

#### å•é¡Œ 1ï¼šTable 'users' already exists
- **æ—¥æœŸ**ï¼š2025/11/06
- **ç‹€æ³**ï¼šå•Ÿå‹•ä¼ºæœå™¨æ™‚å‡ºç¾ `Table 'users' already exists` éŒ¯èª¤
- **åŸå› **ï¼šèˆŠçš„ users è¡¨çµæ§‹èˆ‡æ–°çš„ Entity å®šç¾©ä¸ä¸€è‡´
- **è§£æ±ºæ–¹æ³•**ï¼šåŸ·è¡Œ `DROP TABLE users;` åˆªé™¤èˆŠè¡¨ï¼Œè®“ TypeORM é‡æ–°å»ºç«‹

#### å•é¡Œ 2ï¼šfindOne æ–¹æ³•æ²’æœ‰éŒ¯èª¤è™•ç†
- **æ—¥æœŸ**ï¼š2025/11/06
- **ç‹€æ³**ï¼šUsersService.findOne() æ‰¾ä¸åˆ°ç”¨æˆ¶æ™‚å›å‚³ null
- **åŸå› **ï¼šæ²’æœ‰è™•ç†æ‰¾ä¸åˆ°è³‡æ–™çš„æƒ…æ³
- **è§£æ±ºæ–¹æ³•**ï¼šåŠ å…¥ NotFoundException éŒ¯èª¤è™•ç†

#### å•é¡Œ 3ï¼šé‡å•Ÿä¼ºæœå™¨æ™‚å‡ºç¾ Table 'users' already exists
- **æ—¥æœŸ**ï¼š2025/11/06
- **ç‹€æ³**ï¼š`synchronize: true` æ™‚ï¼Œé‡å•Ÿä¼ºæœå™¨å‡ºç¾ `Table 'users' already exists` éŒ¯èª¤
- **åŸå› **ï¼šTypeORM å˜—è©¦é‡æ–°å»ºç«‹å·²å­˜åœ¨çš„è¡¨ï¼Œä½†è¡¨çµæ§‹èˆ‡ Entity ä¸€è‡´æ™‚æœƒè¡çª
- **è§£æ±ºæ–¹æ³•**ï¼š
  - æ–¹æ³• 1ï¼šå°‡ `synchronize` æ”¹ç‚º `false`ï¼ˆæ¨è–¦ï¼‰
  - æ–¹æ³• 2ï¼šåˆªé™¤èˆŠè¡¨å¾Œé‡æ–°å•Ÿå‹•ï¼ˆé©ç”¨æ–¼è¡¨çµæ§‹æ”¹è®Šæ™‚ï¼‰
- **æ³¨æ„**ï¼šå»ºç«‹æ–° Entity æ™‚éœ€è¦æ”¹å› `synchronize: true`ï¼Œå»ºç«‹å®Œæˆå¾Œå†æ”¹å› `false`

### å¾…è§£æ±ºçš„å•é¡Œ

ï¼ˆç›®å‰æ²’æœ‰å¾…è§£æ±ºçš„å•é¡Œï¼‰

---

## ğŸ’¡ é–‹ç™¼ç­†è¨˜

### é‡è¦æé†’

1. **`synchronize` è¨­å®šçš„ä½¿ç”¨æ™‚æ©Ÿï¼ˆé‡è¦ï¼ï¼‰**ï¼š

   **ä½•æ™‚è¨­å®š `synchronize: true`**ï¼š
   - æ–°å¢æ–°çš„ Entityï¼ˆå¦‚å»ºç«‹ Booksã€Cartã€Orders ç­‰ï¼‰
   - ä¿®æ”¹ç¾æœ‰ Entity çš„çµæ§‹ï¼ˆå¦‚æ–°å¢æ¬„ä½ã€ä¿®æ”¹å‹åˆ¥ï¼‰
   - éœ€è¦ TypeORM è‡ªå‹•åŒæ­¥è³‡æ–™åº«çµæ§‹æ™‚

   **ä½•æ™‚è¨­å®š `synchronize: false`**ï¼š
   - Entity çµæ§‹ç©©å®šï¼Œä¸éœ€è¦ä¿®æ”¹æ™‚
   - é¿å…é‡è¤‡å»ºè¡¨éŒ¯èª¤ï¼ˆ`Table already exists`ï¼‰
   - æ­£å¼ç’°å¢ƒï¼ˆproductionï¼‰å¿…é ˆè¨­ç‚º `false`

   **å»ºè­°å·¥ä½œæµç¨‹**ï¼š
   ```
   1. å¹³å¸¸é–‹ç™¼ï¼šsynchronize: false
   2. è¦å»ºç«‹æ–° Entityï¼šæ”¹æˆ synchronize: true
   3. é‡å•Ÿä¼ºæœå™¨ï¼Œç¢ºèªè¡¨å»ºç«‹æˆåŠŸ
   4. æ”¹å› synchronize: falseï¼ˆå¯é¸ï¼‰
   5. ç¹¼çºŒé–‹ç™¼å…¶ä»–åŠŸèƒ½
   ```

   **é‡è¦**ï¼š
   - `synchronize: true` æ™‚ï¼Œå¦‚æœ Entity èˆ‡ç¾æœ‰è¡¨çµæ§‹ä¸€è‡´ï¼Œä¸æœƒå ±éŒ¯
   - åªæœ‰çµæ§‹ä¸ä¸€è‡´æ™‚æ‰æœƒå˜—è©¦ä¿®æ”¹ï¼ˆå¯èƒ½å°è‡´è³‡æ–™éºå¤±ï¼‰
   - é–‹ç™¼éšæ®µå¯ä»¥ä¸€ç›´é–‹è‘— `true`ï¼Œä½†è¦æ³¨æ„ä¸è¦èª¤æ”¹ Entity

2. **å»ºç«‹æ¨¡çµ„çš„æ¨™æº–æµç¨‹**ï¼š
   ```
   Entity â†’ DTO â†’ Module â†’ Service â†’ Controller â†’ è¨»å†Šåˆ° AppModule â†’ æ¸¬è©¦
   ```

3. **è³‡æ–™å¤¾æ‹¼å­—æ³¨æ„**ï¼š
   - ç›®å‰ä½¿ç”¨ `entityies` è€Œé `entities`ï¼ˆå¦‚æœè¦çµ±ä¸€ï¼Œå¯ä»¥åœ¨ä¹‹å¾Œé‡æ§‹ï¼‰

4. **TypeORM é—œè¯è¨­å®š**ï¼š
   - `@ManyToOne` - å¤šå°ä¸€ï¼ˆè³¼ç‰©è»Š â†’ ç”¨æˆ¶ï¼‰
   - `@OneToMany` - ä¸€å°å¤šï¼ˆç”¨æˆ¶ â†’ è³¼ç‰©è»Šï¼‰
   - `@ManyToMany` - å¤šå°å¤šï¼ˆç›®å‰å°ˆæ¡ˆä¸éœ€è¦ï¼‰

5. **æ¸¬è©¦å»ºè­°**ï¼š
   - æ¯å®Œæˆä¸€å€‹ CRUD åŠŸèƒ½å°±ç«‹å³æ¸¬è©¦
   - ä½¿ç”¨ `.http` æª”æ¡ˆè¨˜éŒ„æ¸¬è©¦ç”¨ä¾‹
   - åœ¨ MySQL ä¸­ç¢ºèªè³‡æ–™æ˜¯å¦æ­£ç¢ºå¯«å…¥

---

## ğŸ“š åƒè€ƒè³‡æº

- [NestJS å®˜æ–¹æ–‡ä»¶](https://docs.nestjs.com/)
- [TypeORM å®˜æ–¹æ–‡ä»¶](https://typeorm.io/)
- [BACKEND_SETUP_GUIDE.md](./BACKEND_SETUP_GUIDE.md) - åŸå§‹å»ºç½®æŒ‡å—
- [test-api.http](./test-api.http) - Users æ¨¡çµ„æ¸¬è©¦ç¯„ä¾‹

---

## ğŸ¯ ä¸‹ä¸€æ­¥è¡Œå‹•

**ç›®å‰é€²åº¦**ï¼šéšæ®µ 1 å®Œæˆï¼Œæº–å‚™é–‹å§‹éšæ®µ 2

**ä¸‹ä¸€å€‹ä»»å‹™**ï¼šå»ºç«‹ Books æ¨¡çµ„

**å»ºè­°åšæ³•**ï¼š
1. å…ˆå»ºç«‹ Book Entityï¼Œç¢ºèªè¡¨çµæ§‹
2. å»ºç«‹ DTOsï¼ˆcreate-book.dto.ts, update-book.dto.tsï¼‰
3. å»ºç«‹ Serviceï¼ˆå¯¦ä½œ CRUD æ–¹æ³•ï¼‰
4. å»ºç«‹ Controllerï¼ˆå®šç¾© API ç«¯é»ï¼‰
5. è¨»å†Šåˆ° AppModule
6. æ¸¬è©¦æ‰€æœ‰ API

**é ä¼°æ™‚é–“**ï¼š1-2 å°æ™‚

---

**æœ€å¾Œæ›´æ–°æ—¥æœŸ**ï¼š2025/11/06
**æ›´æ–°äºº**ï¼šClaude Code Assistant
